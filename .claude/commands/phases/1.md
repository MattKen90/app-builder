---
description: Phase 1 - Vision. Define what to build through aggressive Q&A, research, and scope definition.
---

# Phase 1: Vision

**Mission**: Transform idea into complete product vision. Uses hybrid approach: interactive Q&A in main context, autonomous research/synthesis via subagent.

---

## Mode Detection

Read `.state.json` to determine paths:

| Context | Greenfield | Enhancer |
|---------|------------|----------|
| Input | Human's idea | `.enhancer/DISCOVERY.md` |
| Output | `VISION.md` | `.enhancer/VISION.md` |

---

## Process Overview

```
┌─────────────────────────────────────────────────────────────┐
│ MAIN CONTEXT (Interactive)                                  │
├─────────────────────────────────────────────────────────────┤
│ Step 1: EXTRACT - Multi-round Q&A with user                 │
│   Round 1: Problem & Users                                  │
│   Round 2: Vision & Workflow & Monetization                 │
│   Round 3: Constraints & Priorities                         │
│   → Summarize after each round, get confirmation            │
│   → Write extraction summary to .enhancer/EXTRACTION.md     │
└─────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────┐
│ SUBAGENT (Autonomous)                                       │
├─────────────────────────────────────────────────────────────┤
│ Step 2: EXPAND - Research competitors, pricing, tech        │
│ Step 3: SCOPE - Define in/out boundaries                    │
│ Step 4: SYNTHESIZE - Write VISION.md                        │
│   → ALL work persisted to files before returning            │
│   → Returns only: summary + approval request                │
└─────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────┐
│ MAIN CONTEXT (Interactive)                                  │
├─────────────────────────────────────────────────────────────┤
│ Step 5: Present VISION.md summary to user                   │
│ Step 6: Get approval or iterate                             │
│ Step 7: Update state, handoff to Phase 2                    │
└─────────────────────────────────────────────────────────────┘
```

---

## Step 1: EXTRACT (Main Context)

Conduct 3 rounds of Q&A. Read vision-architect agent for detailed question guidance.

**Round 1: Problem & Users**
- What pain point triggered this idea?
- Who specifically uses this? (Name a persona, not "everyone")
- What do they use today? What's broken?

**Round 2: Vision & Workflow & Monetization**
- Walk through the ideal user session
- What's the "aha moment"?
- Who pays and why? What's free vs paid?

**Round 3: Constraints & Priorities**
- What's non-negotiable for v1?
- What's explicitly out of scope?
- Target MRR?

**After each round**: Summarize, confirm understanding.

**After all rounds**: Write summary to `.enhancer/EXTRACTION.md` (or `EXTRACTION.md` for greenfield).

---

## Step 2-4: EXPAND, SCOPE, SYNTHESIZE (Subagent)

**Use the Task tool to spawn vision-architect for autonomous work:**

```
Task tool parameters:
  subagent_type: "general-purpose"
  description: "Vision research and synthesis"
  prompt: |
    You are the vision-architect agent. Read your full instructions from:
    .claude/agents/vision-architect.md

    CONTEXT:
    - Mode: {greenfield|enhancer}
    - Extraction summary: {path to EXTRACTION.md}
    - Discovery (if enhancer): .enhancer/DISCOVERY.md

    YOUR MISSION (autonomous, no user interaction):
    1. EXPAND: Research competitors, pricing, cutting-edge tech (use WebSearch)
    2. SCOPE: Define in/out boundaries, apply 80/20 rule
    3. SYNTHESIZE: Write complete VISION.md

    CRITICAL REQUIREMENTS:
    1. Write research findings to {output_dir}/RESEARCH.md
    2. Write final vision to {output_dir}/VISION.md
    3. Do NOT return full documents - they're in the files
    4. Return ONLY:
       - Confirmation files written
       - 3-5 key discoveries from research
       - Feature count (must-have / should-have / out-of-scope)
       - Recommended pricing summary (1-2 lines)

    OUTPUT PATHS:
    - Greenfield: VISION.md, RESEARCH.md at project root
    - Enhancer: .enhancer/VISION.md, .enhancer/RESEARCH.md
```

---

## Step 5-6: Review & Approve (Main Context)

After subagent returns:

1. Read VISION.md
2. Present summary to user:
   - Problem/Solution in 2 sentences
   - Feature count by tier
   - Pricing recommendation
   - Top discoveries from research

3. Ask: "Approve this vision? Or would you like to adjust?"

4. If adjustments needed:
   - Make edits directly to VISION.md
   - Re-confirm with user

---

## Step 7: Finalize

Once approved:

1. Update `.state.json`:
   - Set `app.phase` to 2
   - Set `ddd.last_action` to "Vision approved"

2. Create `.claude/rules/app/app.md` with app context summary

3. Display handoff

---

## Handoff

```
✅ Phase 1 Complete: Vision Approved

VISION.md: {path based on mode}
RESEARCH.md: {path based on mode}
App Rules: .claude/rules/app/app.md

Ready for Phase 2: Technical Foundation

Run: /phases/2
```

---

## File Outputs

| File | Purpose | Written By |
|------|---------|------------|
| EXTRACTION.md | Q&A summary | Main context |
| RESEARCH.md | Competitor/pricing research | Subagent |
| VISION.md | Complete product vision | Subagent |
| .claude/rules/app/app.md | App context for Claude | Main context |
