---
description: Phase 3 - Build. Execute the DDD cycle to implement features from the roadmap.
---

# Phase 3: Build

**Mission**: Implement features from ROADMAP.md using the Documentation-Driven Development (DDD) cycle.

**Mode-Aware**: Reads `.state.json` to determine paths and feature prefixes.

---

## Mode Detection

| Context | Greenfield | Enhancer |
|---------|------------|----------|
| Input | `ROADMAP.md`, `ARCHITECTURE.md` | `.enhancer/ROADMAP.md`, `.enhancer/ARCHITECTURE.md` |
| State | `.state.json` | `.state.json` |
| Workspaces | `.ddd_workspaces/` | `.enhancer/workspaces/` |
| Feature Prefix | F1, F2, F3... | E-F1, E-F2, E-F3... |
| Testing | New tests | New tests + regression tests |

---

## Pre-Flight Check

Verify prerequisites:

```
1. Read `.mode` file
2. Check ROADMAP.md exists (path based on mode)
3. Check ARCHITECTURE.md exists (path based on mode)
4. If missing â†’ "Phase 2 not complete. Run /phases/2 first."
5. If exists â†’ Proceed to DDD
```

---

## What This Phase Does

Phase 3 is the **build loop**. Each feature goes through a 5-step DDD cycle:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DDD Cycle                         â”‚
â”‚                                                      â”‚
â”‚   /ddd/1 â†’ /ddd/2 â†’ /ddd/3 â†’ /ddd/4 â†’ /ddd/5       â”‚
â”‚   Understand  Document  Breakdown  Implement  Review â”‚
â”‚                                                      â”‚
â”‚   Repeat for each feature in ROADMAP.md             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### The 5 DDD Steps

| Step | Command | Purpose | Output |
|------|---------|---------|--------|
| 1 | `/ddd/1` | Understand & approve feature spec | `FEATURE_SPEC.md` |
| 2 | `/ddd/2` | Document before building | `DOCS_DRAFT.md` |
| 3 | `/ddd/3` | Break into implementation phases | `IMPLEMENTATION_PLAN.md` |
| 4 | `/ddd/4` | Build phase by phase | Working code + tests |
| 5 | `/ddd/5` | Review, finalize docs, complete | Final documentation |

---

## How to Use Phase 3

### Starting the Build

Run this command to begin Phase 3. It will:
1. Check prerequisites
2. Show current progress
3. Identify next feature to build
4. Start DDD Step 1

### Continuing the Build

After completing a feature's DDD cycle, return here or run `/ddd/1` directly to pick up the next feature.

### Progress Tracking

State is tracked in:
- **Both modes**: `.state.json` (single source of truth)

```json
{
  "features": {
    "F1": { "status": "complete", "steps": {...} },
    "F2": { "status": "in_progress", "steps": {...} },
    "F3": { "status": "pending" }
  },
  "ddd": {
    "current_feature": "F2",
    "current_step": "3"
  }
}
```

---

## Instructions for Claude

When this command runs:

### Step 1: Check Prerequisites

```
ğŸ“‹ Phase 3: Build Check

Mode: {greenfield|enhancer}

Prerequisites:
âœ… ROADMAP.md exists
âœ… ARCHITECTURE.md exists

{or}

âŒ Missing: ROADMAP.md
   Run /phases/2 first.
```

### Step 2: Show Progress

```
ğŸ“Š Build Progress

Phase 1 Features (Foundation + Payments):
âœ… F1 - User Authentication (complete)
ğŸ”„ F-PAY - Billing Infrastructure (in progress - Step 3)
â³ F2 - Dashboard (pending)

Phase 2 Features:
â³ F3 - Data Export (pending)
â³ F4 - Settings (pending)

Overall: 1/5 features complete (20%)
```

### Step 3: Resume or Start Next

**If feature in progress:**
```
ğŸ”„ Resuming: F-PAY - Billing Infrastructure

Currently at: DDD Step 3 (Code Breakdown)

Continue with: /ddd/3
```

**If ready for next feature:**
```
â­ï¸ Next Feature: F2 - Dashboard

Dependencies satisfied: F1 âœ“, F-PAY âœ“

Start with: /ddd/1

Or pick a different feature: /ddd/1 [feature-id]
```

### Step 4: Launch DDD

After showing status, automatically proceed to the appropriate DDD step:
- If resuming: Go to current step
- If starting new: Go to `/ddd/1`

---

## DDD Quick Reference

### Step 1: Understand (`/ddd/1`)
- Select feature from ROADMAP.md
- Create workspace
- Generate FEATURE_SPEC.md
- Get human approval

### Step 2: Document (`/ddd/2`)
- Write user-facing docs BEFORE building
- Create DOCS_DRAFT.md
- Docs become the contract

### Step 3: Code Breakdown (`/ddd/3`)
- Break feature into 2-4 phases
- Each phase: buildable, testable
- Create IMPLEMENTATION_PLAN.md

### Step 4: Implement (`/ddd/4`)
- Build phase by phase
- Test at each checkpoint
- Commit after each phase
- Update PROGRESS.md

### Step 5: Review (`/ddd/5`)
- Verify acceptance criteria
- Finalize documentation
- Update state (feature complete)
- Clean workspace

---

## Enhancer Mode: Regression Testing

In enhancer mode, each DDD step includes regression checks:

```
Before Phase: Run existing test suite
After Phase: Run existing test suite again

If regressions detected:
âš ï¸ Regression in existing functionality
- Test: [test name]
- Error: [error message]

Fix before proceeding.
```

---

## Completion

Phase 3 is complete when all features in ROADMAP.md are done:

```
ğŸ‰ Phase 3 Complete: All Features Built!

Features Implemented:
âœ… F1 - User Authentication
âœ… F-PAY - Billing Infrastructure
âœ… F2 - Dashboard
âœ… F3 - Data Export
âœ… F4 - Settings

Total: 5/5 features (100%)

Documentation: docs/features/
Tests: All passing

Your app is ready!

Next steps:
- Deploy to production
- Set up Stripe webhooks
- Monitor MRR dashboard
```

---

## Commands Reference

| Command | Purpose |
|---------|---------|
| `/phases/3` | Check progress, resume/start next feature |
| `/ddd/1` | Start DDD cycle for next/specific feature |
| `/ddd/2` | Document feature (after Step 1) |
| `/ddd/3` | Break down implementation (after Step 2) |
| `/ddd/4` | Implement phases (after Step 3) |
| `/ddd/5` | Review and complete (after Step 4) |

---

## Remember

- **One feature at a time** - Complete the DDD cycle before starting next
- **Document before code** - Step 2 creates the contract
- **Test at checkpoints** - Don't batch testing to the end
- **Commit per phase** - Small, incremental commits
- **MRR is King** - F-PAY (payments) is always in Phase 1
