---
description: Phase 0 - Discovery (Enhancer mode only). Analyze existing codebase before enhancement.
---

# Phase 0: Discovery

**Mode**: Enhancer only. Spawns discovery-architect as a true subagent.

---

## Pre-Flight Check

```
1. Read `.state.json`
2. If mode != "enhancer" → Error: "Phase 0 is for enhancer mode only. Run /set-state mode enhancer first."
3. If mode == "enhancer" → Proceed to spawn subagent
```

---

## Execution

**Use the Task tool to spawn the discovery-architect agent:**

```
Task tool parameters:
  subagent_type: "general-purpose"
  description: "Discovery analysis of codebase"
  prompt: |
    You are the discovery-architect agent. Read your full instructions from:
    .claude/agents/discovery-architect.md

    Your mission: Analyze the codebase at {target path from .state.json}

    CRITICAL REQUIREMENTS:
    1. Write ALL findings to .enhancer/DISCOVERY.md before returning
    2. Do NOT return detailed findings in your response - they go in the file
    3. Your response should only confirm: file written, key stats, ready for Phase 1

    Process:
    1. SCAN: Tech stack, structure, Claude Code setup
    2. ANALYZE: Patterns, data model, API surface, monetization
    3. SYNTHESIZE: Write .enhancer/DISCOVERY.md

    When complete, return ONLY:
    - Confirmation that .enhancer/DISCOVERY.md was written
    - Line count of the document
    - Top 3 enhancement opportunities (one line each)
```

---

## Post-Execution

After subagent returns:

1. Verify `.enhancer/DISCOVERY.md` exists
2. Update `.state.json`:
   - Set `app.phase` to 1
   - Set `ddd.last_action` to "Discovery complete"
3. Display handoff message

---

## Handoff

```
✅ Phase 0 Complete: Discovery

DISCOVERY.md: .enhancer/DISCOVERY.md

Ready for Phase 1: Vision

Run: /phases/1
```
