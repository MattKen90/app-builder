---
description: Phase 0 - Discovery (Enhancer mode only). Analyze existing codebase before enhancement.
---

# Phase 0: Discovery

**Mode**: Enhancer only. This phase analyzes an existing codebase before proposing any changes.

---

## Pre-Flight Check

First, verify mode:

```
1. Read `.state.json` file
2. If mode != "enhancer" → Error: "Phase 0 is for enhancer mode only. Run /set-state mode enhancer first."
3. If mode == "enhancer" → Proceed
```

---

## What This Phase Does

Phase 0 maps the existing codebase so enhancement work builds ON it, not against it.

**You will discover:**
- Tech stack (languages, frameworks, databases)
- Architecture patterns and conventions
- Existing Claude Code setup (CLAUDE.md, commands, agents)
- Data model and API surface
- Current monetization status
- Enhancement opportunities

**Output:** `.enhancer/DISCOVERY.md`

---

## Instructions for Claude

**Invoke the discovery-architect agent** with these directives:

### Your Mission

You are analyzing an existing codebase for enhancement. Map what exists. Don't propose changes yet—that's Phase 1's job.

### Process

**1. SCAN Mode** - Quick automated analysis:
- Read package.json, requirements.txt, or equivalent
- Map directory structure
- Identify tech stack
- Check for existing Claude Code setup

**2. ANALYZE Mode** - Deep understanding:
- Code patterns and conventions
- Data model (entities, schema)
- API surface (endpoints, auth)
- Monetization infrastructure (Stripe, billing, feature gates)

**3. SYNTHESIZE Mode** - Produce DISCOVERY.md:
- Write comprehensive discovery document
- Location: `.enhancer/DISCOVERY.md`

### Output Location

Write discovery to `.enhancer/`, update state in root:
```
.enhancer/
└── DISCOVERY.md     ← Your primary output

.state.json          ← Update phase to 1 when complete
```

### What to Document

```markdown
# Discovery: [App Name]

## Executive Summary
[What is this app? Current state?]

## Tech Stack
[Languages, frameworks, databases, hosting]

## Architecture Overview
[How components connect]

## Existing Claude Code Setup
[CLAUDE.md summary, commands, rules, agents]

## Data Model
[Entities, schema location]

## API Surface
[Endpoints, auth flow]

## Monetization Assessment
[Payment provider, pricing model, gaps]

## Code Patterns to Follow
[Conventions enhancements should follow]

## Enhancement Opportunities
[Quick wins, revenue gaps, technical debt]

## Constraints
[What can't change, integration points, risks]
```

### Completion Criteria

Phase 0 is complete when:
- [ ] `.enhancer/DISCOVERY.md` exists
- [ ] Tech stack fully identified
- [ ] Monetization status assessed
- [ ] Enhancement opportunities noted
- [ ] Code patterns documented

---

## Handoff

```
✅ Phase 0 Complete: Discovery

DISCOVERY.md: .enhancer/DISCOVERY.md

The codebase is now mapped. You understand:
- What technologies are in use
- How the code is structured
- What patterns to follow
- Where monetization gaps exist

Ready for Phase 1: Vision

Run: /phases/1
```

---

## Remember

- **Map, don't judge** - Document what IS
- **MRR lens** - Always assess monetization
- **Follow their patterns** - Note conventions
- **Be thorough** - Missing something means surprises later
